{"qid": 4064, "orig_input": "Vova had a pretty weird sleeping schedule. There are $h$ hours in a day. Vova will sleep exactly $n$ times. The $i$-th time he will sleep exactly after $a_i$ hours from the time he woke up. You can assume that Vova woke up exactly at the beginning of this story (the initial time is $0$). Each time Vova sleeps exactly one day (in other words, $h$ hours).\n\nVova thinks that the $i$-th sleeping time is good if he starts to sleep between hours $l$ and $r$ inclusive.\n\nVova can control himself and before the $i$-th time can choose between two options: go to sleep after $a_i$ hours or after $a_i - 1$ hours.\n\nYour task is to say the maximum number of good sleeping times Vova can obtain if he acts optimally.\n\n\n-----Input-----\n\nThe first line of the input contains four integers $n, h, l$ and $r$ ($1 \\le n \\le 2000, 3 \\le h \\le 2000, 0 \\le l \\le r < h$) \u2014 the number of times Vova goes to sleep, the number of hours in a day and the segment of the good sleeping time.\n\nThe second line of the input contains $n$ integers $a_1, a_2, \\dots, a_n$ ($1 \\le a_i < h$), where $a_i$ is the number of hours after which Vova goes to sleep the $i$-th time.\n\n\n-----Output-----\n\nPrint one integer \u2014 the maximum number of good sleeping times Vova can obtain if he acts optimally.\n\n\n-----Example-----\nInput\n7 24 21 23\n16 17 14 20 20 11 22\n\nOutput\n3\n\n\n\n-----Note-----\n\nThe maximum number of good times in the example is $3$.\n\nThe story starts from $t=0$. Then Vova goes to sleep after $a_1 - 1$ hours, now the time is $15$. This time is not good. Then Vova goes to sleep after $a_2 - 1$ hours, now the time is $15 + 16 = 7$. This time is also not good. Then Vova goes to sleep after $a_3$ hours, now the time is $7 + 14 = 21$. This time is good. Then Vova goes to sleep after $a_4 - 1$ hours, now the time is $21 + 19 = 16$. This time is not good. Then Vova goes to sleep after $a_5$ hours, now the time is $16 + 20 = 12$. This time is not good. Then Vova goes to sleep after $a_6$ hours, now the time is $12 + 11 = 23$. This time is good. Then Vova goes to sleep after $a_7$ hours, now the time is $23 + 22 = 21$. This time is also good.", "input": "Maximize the number of times Vova sleeps within a specified time range by choosing between sleeping after a given number of hours or one hour earlier for each sleep cycle.", "test_cases": {"inputs": ["7 24 21 23\n16 17 14 20 20 11 22\n", "65 654 560 571\n83 511 615 263 171 146 241 511 582 216 352 632 506 538 536 217 627 213 324 579 172 241 363 584 450 144 447 536 241 523 162 21 437 291 191 111 567 502 170 570 231 493 169 360 107 114 322 160 574 611 460 558 616 361 284 58 41 345 450 560 543 520 105 416 38\n", "2 24 21 22\n23 1\n", "5 3 0 0\n1 1 1 1 1\n", "7 250 21 23\n16 17 14 20 20 11 22\n", "29 425 46 81\n405 237 24 45 165 328 134 309 7 236 348 204 368 396 298 343 180 186 395 246 44 53 303 404 271 344 269 292 12\n", "2 24 14 16\n17 2\n", "29 700 471 636\n222 416 14 30 152 126 9 114 605 415 406 162 662 514 26 329 58 442 249 438 436 120 23 572 359 523 233 443 116\n", "29 5 1 1\n4 2 2 4 3 2 1 1 3 4 2 1 4 2 3 3 3 4 3 2 2 4 2 1 3 3 4 3 2\n", "37 14 2 9\n2 8 5 10 3 12 11 7 7 11 4 7 9 7 8 13 10 10 9 12 4 12 11 1 7 10 8 7 9 11 1 10 9 9 7 9 11\n", "60 323 211 322\n227 286 146 309 283 258 319 300 50 192 177 125 196 131 144 321 108 49 130 176 129 289 119 286 181 316 91 322 122 296 298 285 108 136 106 131 91 174 138 183 154 133 152 261 98 283 274 317 267 268 83 32 146 186 129 210 240 159 75 5\n", "4 3 0 0\n1 1 1 1\n", "1 10 0 9\n5\n", "39 42 22 25\n26 41 35 6 35 38 28 40 1 37 38 12 30 31 33 12 13 7 28 15 41 28 1 18 21 9 38 3 2 1 2 30 20 22 8 33 37 19 22\n", "23 37 29 33\n10 32 7 28 35 11 24 23 20 15 33 28 7 11 4 14 30 28 25 31 16 17 10\n", "46 10 2 9\n8 8 2 6 9 1 5 2 9 1 9 5 7 4 9 3 9 9 2 7 9 4 5 3 1 9 2 4 1 1 7 1 4 1 9 4 6 1 7 1 1 6 4 2 2 8\n", "40 15 8 11\n9 8 11 1 13 4 9 2 3 11 7 8 6 4 2 7 9 9 9 14 4 5 3 14 9 4 3 1 10 10 4 9 12 13 2 7 4 9 2 5\n", "1 725 158 340\n317\n", "7 1111 1056 1073\n82 422 1053 273 304 452 600\n", "1 1586 868 1579\n1235\n", "1 426 28 400\n111\n", "48 39 36 38\n17 28 20 33 5 13 7 17 33 22 14 23 7 32 19 20 24 1 14 18 22 16 16 30 24 36 33 19 25 22 26 15 21 1 7 27 15 30 25 15 13 18 5 6 26 3 14 19\n", "18 14 11 12\n2 7 10 2 7 5 7 8 7 3 5 3 13 4 9 12 11 13\n", "58 48 36 38\n23 4 23 23 33 19 14 7 10 22 17 8 37 39 5 31 3 38 43 20 24 12 12 16 31 44 21 2 10 3 20 12 26 35 12 35 35 34 10 41 42 32 32 9 7 33 39 28 26 34 16 25 39 23 20 4 38 25\n", "62 51 43 50\n40 36 14 6 44 12 23 23 50 37 15 14 21 16 6 9 40 21 20 11 21 6 34 50 40 43 44 30 12 41 28 39 31 34 12 32 9 33 45 9 13 22 48 24 11 5 24 21 46 26 14 47 10 18 42 2 40 30 46 47 22 3\n", "19 1049 1021 1048\n719 396 531 546 95 841 322 880 446 189 352 1027 630 1025 442 715 100 202 30\n", "45 20 9 13\n17 8 1 16 3 19 4 12 1 2 15 18 11 13 9 8 7 17 6 7 8 13 9 12 17 4 19 8 4 4 9 2 16 11 14 7 13 6 9 3 13 2 10 16 9\n", "62 50 31 34\n46 2 7 35 5 5 22 18 18 40 44 4 39 44 3 19 34 9 18 7 26 42 16 31 45 47 21 27 8 46 47 4 34 14 18 1 17 3 19 32 34 26 5 1 25 3 39 45 11 29 8 38 8 26 36 47 10 43 46 24 6 31\n", "2 24 22 23\n22 2\n", "2 239 168 204\n126 42\n", "39 14 6 10\n1 10 13 7 6 11 1 2 2 11 6 3 10 3 13 7 4 5 8 7 9 12 5 9 8 3 8 4 2 13 5 7 6 3 11 8 2 11 12\n", "34 584 462 583\n322 435 136 39 116 537 250 567 240 488 502 112 548 32 24 543 221 38 133 32 502 285 429 155 188 429 339 23 354 234 267 86 494 274\n", "58 4 1 3\n3 2 2 2 3 2 2 1 3 3 2 1 3 2 2 2 3 1 2 2 3 2 3 3 2 3 2 3 2 1 3 2 3 3 2 2 2 2 2 2 2 1 1 3 2 1 1 2 2 3 3 2 2 1 1 1 2 1\n"], "outputs": ["3\n", "2\n", "2\n", "5\n", "0\n", "2\n", "1\n", "8\n", "14\n", "28\n", "27\n", "4\n", "1\n", "14\n", "7\n", "46\n", "21\n", "1\n", "0\n", "1\n", "1\n", "15\n", "5\n", "11\n", "21\n", "2\n", "16\n", "13\n", "2\n", "1\n", "25\n", "4\n", "58\n"]}, "solutions": "[\"def main():\\n    import sys\\n    input = sys.stdin.readline\\n\\n    N, H, L, R = list(map(int, input().split()))\\n    A = list(map(int, input().split()))\\n\\n    dp = [[-1] * H for _ in range(N+1)]\\n    dp[0][0] = 0\\n    for i, a in enumerate(A):\\n        for t in range(H):\\n            if dp[i][t] >= 0:\\n                dp[i+1][(t+a)%H] = max(dp[i+1][(t+a)%H], dp[i][t] + int(L <= (t+a)%H <= R))\\n                dp[i + 1][(t + a-1) % H] = max(dp[i + 1][(t + a-1) % H], dp[i][t] + int(L <= (t + a-1) % H <= R))\\n    print(max(dp[-1]))\\n\\n\\n\\ndef __starting_point():\\n    main()\\n\\n__starting_point()\", \"#!/usr/bin/env python3\\nimport sys\\ninput = sys.stdin.readline\\n\\nn, h, l, r = map(int, input().split())\\na = [int(item) for item in input().split()]\\ndp = [[-1] * h for _ in range(n + 1)]\\ndp[0][0] = 0\\n\\nfor i, item in enumerate(a):\\n    for j in range(h):\\n        if dp[i][j] == -1:\\n            continue\\n        # Sleep early\\n        nt = (j + item) % h\\n        if l <= nt <= r:\\n            dp[i+1][nt] = max(dp[i+1][nt], dp[i][j] + 1)\\n        else:\\n            dp[i+1][nt] = max(dp[i+1][nt], dp[i][j])\\n        # Sleep normaly\\n        nt = (j + item - 1 + h) % h\\n        if l <= nt <= r:\\n            dp[i+1][nt] = max(dp[i+1][nt], dp[i][j] + 1)\\n        else:\\n            dp[i+1][nt] = max(dp[i+1][nt], dp[i][j])\\nprint(max(dp[-1]))\", \"n,h,l,r = map(int, input().split())\\na = list(map(int, input().split()))\\ndp = [[-1]*h for _ in range(n+1)]\\ndp[0][0] = 0\\nfor i in range(n):\\n    for j in range(h):\\n        if dp[i][j] < 0: continue\\n        dp[i+1][(j+a[i])%h] = max(dp[i+1][(j+a[i])%h], dp[i][j] + (l <= (j+a[i])%h <= r))\\n        dp[i+1][(j+a[i]-1)%h] = max(dp[i+1][(j+a[i]-1)%h], dp[i][j] + (l <= (j+a[i]-1)%h <= r))\\nprint(max(dp[-1]))\", \"def go():\\n    n, h, l, r = list(map(int, input().split()))\\n    # n = int(input())\\n    a = list(map(int, input().split()))\\n    prev = [0]\\n    s = 0\\n    mx = 0\\n    for i, aa in enumerate(a, 1):\\n        cur = []\\n        s += aa\\n        for delay in range(i+1):\\n            g = 1 if l <= (s - delay + h) % h <= r else 0\\n            if delay==0:\\n                cur.append(prev[delay]+g)\\n            elif delay==i:\\n                cur.append(prev[delay-1] + g)\\n            else:\\n                cur.append(max(prev[delay],prev[delay-1])+g)\\n        prev = cur\\n        mx = max(mx,max(cur))\\n    return mx\\n\\n\\n# t = int(input())\\nfor _ in range(1):\\n    print(go())\\n\", \"import sys\\n\\ndef solve():\\n    input = sys.stdin.readline\\n    N, H, L, R = map(int, input().split())\\n    A = [int(a) for a in input().split()]\\n    DP = [[-1] * H for _ in range(N)]\\n    DP[0][A[0]] = (1 if L <= A[0] <= R else 0)\\n    DP[0][A[0] - 1] = (1 if L <= A[0] - 1 <= R else 0)\\n    for i in range(1, N):\\n        for h in range(H):\\n            add = (1 if L <= h <= R else 0)\\n            if DP[i-1][(h - A[i]) % H] > -1: DP[i][h] = max(DP[i][h], DP[i-1][(h - A[i]) % H] + add)\\n            if DP[i-1][(h - A[i] + 1) % H] > -1: DP[i][h] = max(DP[i][h], DP[i-1][(h - A[i] + 1) % H] + add)\\n    print(max(DP[N-1]))\\n    return 0\\n\\ndef __starting_point():\\n    solve()\\n__starting_point()\", \"\\nn,h,l,r = list(map(int,input().split()))\\nN = n\\n\\na = list(map(int,input().split()))\\n\\nflag = True\\ni = -1\\nlis = [float(\\\"-inf\\\")] * h\\nlis[0] = 0\\nans = 0\\n\\nfor i in range(N):\\n\\n    nlis = [float(\\\"-inf\\\")] * h\\n\\n    na = a[i]\\n    for j in range(h):\\n\\n        if l <= (j+na)%h <= r:\\n            nlis[(j+na) % h] = max(nlis[(j+na) % h] , lis[j] + 1)\\n        else:\\n            nlis[(j+na) % h] = max(nlis[(j+na) % h] , lis[j])\\n\\n        \\n\\n        if l <= (j+na-1)%h <= r:\\n            nlis[(j+na-1) % h] = max(nlis[(j+na-1) % h] , lis[j] + 1)\\n        else:\\n            nlis[(j+na-1) % h] = max(nlis[(j+na-1) % h] , lis[j])\\n\\n            \\n\\n    lis = nlis\\n    #print (lis)\\n    \\nprint(max(0,max(lis)))\\n\", \"from itertools import accumulate\\nn,h,l,r = map(int,input().split())\\na = list(map(int,input().split()))\\nacc = [0]+list(accumulate(a))\\ndp = [[0 for i in range(n+1)] for j in range(n+1)]\\nfor i in range(1,n+1):\\n  for j in range(i+1):\\n    x = (acc[i]-j)%h\\n    if j == 0:\\n      if l<=x<=r:\\n        dp[i][j] = dp[i-1][j]+1\\n      else:\\n        dp[i][j] = dp[i-1][j]\\n    else:\\n      if l<=x<=r:\\n        dp[i][j] = max(dp[i-1][j-1],dp[i-1][j])+1\\n      else:\\n        dp[i][j] = max(dp[i-1][j-1],dp[i-1][j])\\nprint(max(dp[n]))\", \"import sys\\ninput = sys.stdin.readline\\n\\nn,h,l,r=list(map(int,input().split()))\\nA=list(map(int,input().split()))\\n\\nDP=[-1]*h\\nDP[0]=0\\n\\nfor a in A:\\n    NDP=[-1]*h\\n    for k in range(h):\\n        if DP[k]==-1:\\n            continue\\n        if l<=(a+k)%h<=r:\\n            NDP[(a+k)%h]=max(NDP[(a+k)%h],DP[k]+1)\\n        else:\\n            NDP[(a+k)%h]=max(NDP[(a+k)%h],DP[k])\\n            \\n        if l<=(a+k-1)%h<=r:\\n            NDP[(a+k-1)%h]=max(NDP[(a+k-1)%h],DP[k]+1)\\n        else:\\n            NDP[(a+k-1)%h]=max(NDP[(a+k-1)%h],DP[k])\\n            \\n    DP=NDP\\n\\nprint(max(DP))\\n        \\n    \\n\\n\", \"import copy\\nn,h,l,r=map(int,input().split())\\nA=list(map(int,input().split()))\\nV=[0]*h\\nV[0]=1\\nG=[0]*h\\nfor i in range(n):\\n    R=[0]*h\\n    RG=[0]*h\\n    for j in range(h):\\n        if V[j]==1:\\n            X=(j+A[i])%h\\n            Y=(j+A[i]+h-1)%h\\n            R[X]=R[Y]=1\\n            if l<=X<=r: RG[X]=max(RG[X],1+G[j])\\n            else: RG[X]=max(RG[X],G[j])\\n            if l<=Y<=r: RG[Y]=max(RG[Y],1+G[j])\\n            else: RG[Y]=max(RG[Y],G[j])\\n    V=R\\n    G=RG\\nprint(max(G))\"]", "task": "apps", "difficulty": "introductory", "split": "test", "transformation_type": "plain_summary"}